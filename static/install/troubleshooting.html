<!DOCTYPE html>
<html lang="en" prefix="og: https://ogp.me/ns#">
    <head>
        <meta charset="utf-8"/>
        <title>Troubleshooting | Install | GrapheneOS</title>
        <meta name="description" content="Troubleshooting the installation process for GrapheneOS, a security and privacy focused mobile OS with Android app compatibility."/>
        <meta name="theme-color" content="#212121"/>
        <meta name="msapplication-TileColor" content="#ffffff"/>
        <meta name="viewport" content="width=device-width, initial-scale=1"/>
        <meta name="twitter:site" content="@GrapheneOS"/>
        <meta name="twitter:creator" content="@GrapheneOS"/>
        <meta property="og:title" content="GrapheneOS CLI install guide"/>
        <meta property="og:description" content="Troubleshooting the installation process for GrapheneOS, a security and privacy focused mobile OS with Android app compatibility."/>
        <meta property="og:type" content="website"/>
        <meta property="og:image" content="https://grapheneos.org/opengraph.png"/>
        <meta property="og:image:width" content="512"/>
        <meta property="og:image:height" content="512"/>
        <meta property="og:image:alt" content="GrapheneOS logo"/>
        <meta property="og:site_name" content="GrapheneOS"/>
        <meta property="og:url" content="https://grapheneos.org/install/"/>
        <link rel="canonical" href="https://grapheneos.org/install/"/>
        <link rel="icon" sizes="16x16 24x24 32x32 48x48 64x64" type="image/vnd.microsoft.icon" href="/favicon.ico"/>
        <link rel="icon" sizes="any" type="image/svg+xml" href="/mask-icon.svg"/>
        <link rel="mask-icon" href="/mask-icon.svg" color="#1a1a1a"/>
        <link rel="apple-touch-icon" href="/apple-touch-icon.png"/>
        <link rel="stylesheet" href="/grapheneos.css?29"/>
        <link rel="manifest" href="/manifest.webmanifest"/>
        <link rel="license" href="/LICENSE.txt"/>
    </head>
    <body>
        <header>
            <nav id="site-menu">
                <ul>
                    <li><a href="/">GrapheneOS</a></li>
                    <li><a href="/features">Features</a></li>
                    <li aria-current="page"><a href="/install/">Install</a></li>
                    <li><a href="/build">Build</a></li>
                    <li><a href="/usage">Usage</a></li>
                    <li><a href="/faq">FAQ</a></li>
                    <li><a href="/releases">Releases</a></li>
                    <li><a href="/source">Source</a></li>
                    <li><a href="/articles/">Articles</a></li>
                    <li><a href="/donate">Donate</a></li>
                    <li><a href="/contact">Contact</a></li>
                </ul>
            </nav>
        </header>
        <main id="troubleshooting">
            <h1><a href="#troubleshooting">Troubleshooting</a></h1>
                <h2><a href="#table-of-contents">Table of contents</a></h2>
                <ul>
                    <li><a href="#asking-for-help">Asking for help</li>
                    <li><a href="#flashing-fails-tmp">Flashing fails due to tmp being full</li>
                    <li><a href="#fastboot-too-old">./flash-all yields "fastboot too old."</a></li>
                    <li><a href="#flashing-hangs">Flashing hangs once started</a></li>
                    <li><a href="#device-bootloops">Device bootloops after installation</a></li>
                    <li><a href="#fastboot-waiting">Fastboot gets stuck waiting for device</a></li>
                    <li><a href="#4a-on-4a5g">4a5G shows no signs of life after installation</a></li>
                    <li><a href="#error-undefined">Web Installer displays 'Error: undefined'</a></li>
                </ul>
                    <section id="asking-for-help">
                        <h3><a href="#asking-for-help">Asking for help</a></h3>
                        <p>The text output from a failed attempt at flashing will contain valuable
                        diagnostic information which is essential in knowing where and how the process
                        went wrong. Please provide this information when asking for help on the
                        GrapheneOS IRC / Matrix channel.</p>
                    </section>

                    <section id="flashing-fails-tmp">
                        <h3><a href="#flashing-fails-tmp">Flashing fails due to tmp being full</a></h3>
                        <p>A common issue on Linux distributions is that they mount the default temporary file
                        directory <code>/tmp</code> as tmpfs which results in it being backed by memory and
                        swap rather than persistent storage. By default, the size is 50% of the available
                        virtual memory. This is often not enough for the flashing process, especially since
                        <code>/tmp</code> is shared between applications and users. To use a different
                        temporary directory if your <code>/tmp</code> doesn't have enough space available:</p>

                        <pre>mkdir tmp &amp;&amp; TMPDIR="$PWD/tmp" ./flash-all.sh</pre>
                    </section>

                    <section id="fastboot-too-old">
                        <h3><a href="#fastboot-too-old">./flash-all yields "fastboot too old."</a></h3>
                        <p><strong>Problem:</strong> When typing in <code>./flash-all</code> into the commandline
                        install, some traceback is printed that includes the words "fastboot too old."</p>

                        <p><strong>Cause:</strong> Your version of fastboot is either a third-party unofficial
                        version of fastboot, you have multiple versions of fastboot installed and your system path
                        includes a bad version, or you are not using powershell. This is generally caused by
                        following unofficial, obsolete third-party guides which encourage the use of unofficial
                        adb packages, rather than the official platform tools release from Google.</p>

                        <p><strong>Solution:</strong> Delete or uninstall any third-party versions of fastboot
                        from your computer, including versions of fastboot or platform-tools that were installed
                        via your operating system repositories if you are running any Linux distributions. Undo
                        any changes you have made to your system variables. If you are using Windows, you must
                        use Powershell, rather than cmd.</p>
                    </section>

                    <section id="flashing-hangs">
                        <h3><a href="#flashing-fails-tmp">Flashing hangs once started</a></h3>
                        <p><strong>Problem:</strong> Once flashing is started, either via the commandline, or
                        via the graphical install, it simply hangs. No text is printed to the screen or appears
                        in scrollback. The phone appears inactive.</p>

                        <p><strong>Cause:</strong> This is typically caused by broken USB cables, or your USB
                        slot on your computer's motherboard being faulty and not properly implementing all
                        the features that the USB protocol has that fastboot needs. If the command
                        <code>fastboot devices</code> lists your device properly, but <code>./flash-all</code>
                        hangs once started, it's likely that your motherboard's implementation of USB is broken
                        or incomplete, or your cable is faulty.</p>

                        <p><strong>Solution:</strong> Try another cable, utilizing a high-quality USB-A to USB-C
                        cable plugged into a rear USB3 port of your computer, try switching ports, or try using
                        a different computer altogether.</p>
                    </section>

                    <section id="device-bootloops">
                        <h3><a href="#device-bootloops">Device bootloops after installation</a></h3>
                        <p><strong>Problem:</strong> The device bootloops after installation. Fastboot displays
                        "no valid slot" error even after being instructed to "start" via the command keys.</p>

                        <p><strong>Cause:</strong> Unofficial versions of platform-tools such as minimal-adb,
                        following unofficial guides which encourage the use of third-party packages, or
                        an outdated platform-tools and fastboot were used. The safety check in the flash-all
                        script to prevent this from happening was erased. This is a typical outcome of unofficial
                        instructions, but note that old or unofficial versions of fastboot have the potential
                        to brick devices permanently.</p>

                        <p>Other ways this can be caused include interrupting the phone during flashing before
                        the installer script or the graphical installer has the chance to run to completion.</p>

                        <p><strong>Solution:</strong> Follow the official instructions or use the web installer.
                        Start from the beginning. Ensure you do not disturb the phone until it has rebooted to
                        fastboot; while it is in <strong>fastbootd</strong>, data is still being transferred
                        and written to the device.</p>
                    </section>

                    <section id="fastboot-waiting">
                        <h3><a href="#flashing-waiting">Fastboot gets stuck waiting for device</a></h3>
                        <p><strong>Problem:</strong> When trying to unlock the bootloader, or do anything else
                        to the phone, fastboot stalls with <code>waiting for device</code> printed to screen.</p>
                        Running the <code>fastboot devices</code> command returns no output.

                        <p><strong>Cause:</strong> The phone must be switched on, plugged in, and on the fastboot
                        screen in order for fastboot to communicate with it. If it is, then on Linux, if the
                        <code>fastboot devices</code> returns the correct answer as root, but does not work as
                        a non-root user, udev is not permitting fastboot to communicate with the handset. On
                        Windows, the fastboot driver from Microsoft via Windows Update is missing.</p>

                        <p><strong>Solution:</strong> Plug in your phone while it is switched on to fastboot via
                        the combo keys (hold down Volume Down and Power for ten seconds and release both
                        simultaneously). On Linux, ensure you have the
                        <a href="/install/cli#flashing-as-non-root">udev rules</a> installed. On Windows,
                        ensure you have Optional Updates enabled in Windows update. Plug the phone in, search
                        for it in <em>Device Manager</em>, and click install driver. <strong>Do not
                        install third-party drivers downloaded outside of Windows Update. Doing
                        so may result in a security compromise to your system and/or physical damage to
                        your phone.</strong></p>
                    </section>

                    <section id="4a-on-4a5g">
                        <h3><a href="#4a-on-4a5G">4a5G shows no signs of life after installation</a></h3>
                        <p><strong>Problem:</strong>After installing on a 4a5G, the phone shows no signs of life.
                        It will not turn on, nor boot, even when the power button is held down.</p>

                        <p><strong>Cause:</strong> A 4a image was flashed onto the 4a5G by mistake.</p>

                        <p><strong>Solution:</strong> The device is permanently bricked. You will need to buy
                        a new one.</p>
                    </section>

                    <section id="error-undefined">
                        <h3><a href="#error-undefined">Web Installer displays 'Error: undefined'</a></h3>
                        <p><strong>Problem:</strong> While installing using the web installer, the browser
                        displays an error message of <code>Error: undefined</code>.</p>

                        <p><strong>Cause:</strong> The browser is clearing the downloaded files prematurely,
                        before the installer has had the chance to finish working. This may happen if there
                        is not enough space to download all the files or while using Private mode.</p>

                        <p><strong>Solution:</strong> Use the web installer without Private mode.</p>
                   </section>
        </main>
        <footer>
            <a href="/"><img src="/logo.png" width="512" height="512" alt=""/>GrapheneOS</a>
            <ul id="social">
                <li><a href="https://twitter.com/GrapheneOS">Twitter</a></li>
                <li><a href="https://github.com/GrapheneOS">GitHub</a></li>
                <li><a href="https://reddit.com/r/GrapheneOS">Reddit</a></li>
                <li><a href="https://www.linkedin.com/company/grapheneos/">LinkedIn</a></li>
            </ul>
        </footer>
    </body>
</html>
